{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="pizzeria-container">
    <!-- Заголовок -->
     
    <h1 class="main-title">Наша Пиццерия!</h1>
    
    <!-- Новинка -->
    <div class="hero-banner" style="flex: 2; position: relative; min-height: 180px;">
      <img src="https://sun9-76.userapi.com/impg/-jSG0x8DSoXQk3f040agb9259b6xH1SC-54k2g/pktpnXTFhOQ.jpg?size=1370x375&quality=95&sign=178ba12cc2fd88db8beca677562de933&type=album" 
           style="width: 100%; height: 100%; object-fit: cover; border-radius: 6px;">
      
      <div style="position: absolute; top: 50%; left: 20px; transform: translateY(-50%); max-width: 300px; background-color: rgba(255, 255, 255, 0.9); padding: 12px; border-radius: 6px; box-shadow: 0 1px 5px rgba(0,0,0,0.1);">
        <h2 style="color: #d35400; margin: 0; font-size: 18px;">НОВИНКА: Пицца Маргарита!</h2>
        <p style="color: #333; font-size: 13px; margin: 8px 0; line-height: 1.3;">Сочная пицца с томатным соусом, тающей моцареллой и ароматным базиликом</p>
        <a href="#" style="display: inline-block; background-color: #e67e22; color: white; padding: 6px 12px; text-decoration: none; border-radius: 3px; font-weight: bold; font-size: 12px;">Попробуйте</a>
      </div>
    </div>

    <!-- Категории -->
    <h2 class="section-title">Категории</h2>
    <div class="categories-list">
        <a href="?category_id=0" class="category-item {% if cat_selected == 0 %}active{% endif %}">
            ВСЕ
        </a>
        {% for category in categories %}
        <a href="?category_id={{ category.id }}" 
           class="category-item {% if cat_selected == category.id %}active{% endif %}">
            {{ category.name|upper }}
        </a>
        {% endfor %}
    </div>

    <!-- Список пицц -->
    <h2 class="section-title">Наши пиццы</h2>
    <div class="pizzas-grid">
        {% for pizza in pizzas %}
        <div class="pizza-card">
            <img src="{{ pizza.image_url }}" alt="{{ pizza.name }}" class="pizza-image">
            <div class="pizza-content">
                <h3 class="pizza-title">{{ pizza.name|upper }}</h3>
                <p class="pizza-description">{{ pizza.description|truncatewords:12 }}</p>
                <p class="pizza-category">Категория: 
                    {% for category in categories %}
                        {% if category.id == pizza.category_id %}
                            {{ category.name }}
                        {% endif %}
                    {% endfor %}
                </p>
                <p class="pizza-price">Цена: {{ pizza.price }} ₽</p>
                <div class="pizza-link-container">
                    <a href="{% url 'pizza_detail' pizza.id %}" class="pizza-link">Заказать</a>
                </div>
            </div>
        </div>
        {% empty %}
        <p class="empty-message">В этой категории пока нет пицц</p>
        {% endfor %}
    </div>
</div>

<style>
    .pizzeria-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 15px;
        font-family: Arial, sans-serif;
        font-size: 14px;
    }

    .main-title {
        color: #e67e22;
        text-align: center;
        margin: 0 0 20px 0;
        font-size: 24px;
    }

    .section-title {
        color: #333;
        font-size: 18px;
        border-bottom: 2px solid #e67e22;
        padding-bottom: 8px;
        margin: 25px 0 15px 0;
    }

    .categories-list {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 20px;
    }

    .category-item {
        padding: 6px 12px;
        background-color: #f1f1f1;
        border-radius: 20px;
        text-decoration: none;
        color: #333;
        transition: all 0.3s;
        font-size: 13px;
    }

    .category-item.active, .category-item:hover {
        background-color: #e67e22;
        color: white;
    }

    .pizzas-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
        align-items: stretch;
    }

    .pizza-card {
        border: 1px solid #ddd;
        border-radius: 8px;
        transition: transform 0.3s;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 100%;
    }

    .pizza-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    }
    
    .pizza-image {
        width: 100%;
        height: 120px;
        object-fit: cover;
    }
    
    .pizza-content {
        padding: 12px;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }

    .pizza-title {
        color: #d35400;
        margin: 0 0 8px 0;
        font-size: 15px;
    }

    .pizza-description {
        color: #666;
        line-height: 1.4;
        font-size: 13px;
        margin: 0 0 8px 0;
    }

    .pizza-category, .pizza-price {
        color: #333;
        margin: 6px 0;
        font-size: 13px;
    }
    
    .pizza-price {
        font-weight: bold;
        color: #d35400;
    }

    .pizza-link-container {
        margin-top: auto;
        padding-top: 8px;
    }

    .pizza-link {
        display: inline-block;
        background-color: #e67e22;
        color: white;
        padding: 6px 12px;
        border-radius: 4px;
        text-decoration: none;
        font-size: 13px;
    }

    .empty-message {
        grid-column: 1 / -1;
        text-align: center;
        color: #666;
        padding: 30px;
        font-size: 14px;
    }

    @media (max-width: 768px) {
        .pizzas-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
{% endblock %}